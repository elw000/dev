# ðŸ—ï¸ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ© - Architecture

## Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙŠÙ…Ø«Ù„ Ø¨Ù†ÙŠØ© DevOps ÙƒØ§Ù…Ù„Ø© ÙˆÙ…ØªÙƒØ§Ù…Ù„Ø© ØªØºØ·ÙŠ Ø¬Ù…ÙŠØ¹ Ø¬ÙˆØ§Ù†Ø¨ Ø§Ù„ØªØ·ÙˆÙŠØ± ÙˆØ§Ù„Ù†Ø´Ø± Ø§Ù„Ø­Ø¯ÙŠØ«.

---

## ðŸ“Š Ø§Ù„Ø·Ø¨Ù‚Ø§Øª (Layers)

### 1. **Application Layer** (Ø·Ø¨Ù‚Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Python/Flask Application         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  API Endpoints                    â”‚  â”‚
â”‚  â”‚  - GET  /                         â”‚  â”‚
â”‚  â”‚  - GET  /health                   â”‚  â”‚
â”‚  â”‚  - GET  /ready                    â”‚  â”‚
â”‚  â”‚  - GET  /metrics                  â”‚  â”‚
â”‚  â”‚  - GET  /api/visitors             â”‚  â”‚
â”‚  â”‚  - GET  /api/data                 â”‚  â”‚
â”‚  â”‚  - POST /api/data                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Features                         â”‚  â”‚
â”‚  â”‚  - Structured Logging (JSON)      â”‚  â”‚
â”‚  â”‚  - Prometheus Metrics             â”‚  â”‚
â”‚  â”‚  - Health Checks                  â”‚  â”‚
â”‚  â”‚  - Database Integration           â”‚  â”‚
â”‚  â”‚  - Cache Integration              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. **Data Layer** (Ø·Ø¨Ù‚Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PostgreSQL     â”‚    â”‚      Redis       â”‚
â”‚   Database       â”‚    â”‚      Cache       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - Persistent     â”‚    â”‚ - In-memory      â”‚
â”‚ - ACID           â”‚    â”‚ - Fast access    â”‚
â”‚ - Structured     â”‚    â”‚ - Session data   â”‚
â”‚ - Relational     â”‚    â”‚ - Counters       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. **Orchestration Layer** (Ø·Ø¨Ù‚Ø© Ø§Ù„ØªÙ†Ø³ÙŠÙ‚)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Kubernetes Cluster                    â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Deployments                           â”‚    â”‚
â”‚  â”‚  - hello-deployment (3 replicas)       â”‚    â”‚
â”‚  â”‚  - postgres (1 replica)                â”‚    â”‚
â”‚  â”‚  - redis (1 replica)                   â”‚    â”‚
â”‚  â”‚  - prometheus (1 replica)              â”‚    â”‚
â”‚  â”‚  - grafana (1 replica)                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Services                              â”‚    â”‚
â”‚  â”‚  - hello-service (NodePort:30253)      â”‚    â”‚
â”‚  â”‚  - postgres (ClusterIP)                â”‚    â”‚
â”‚  â”‚  - redis (ClusterIP)                   â”‚    â”‚
â”‚  â”‚  - prometheus (NodePort:30090)         â”‚    â”‚
â”‚  â”‚  - grafana (NodePort:30030)            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Auto-scaling (HPA)                    â”‚    â”‚
â”‚  â”‚  - Min: 2 replicas                     â”‚    â”‚
â”‚  â”‚  - Max: 10 replicas                    â”‚    â”‚
â”‚  â”‚  - CPU target: 70%                     â”‚    â”‚
â”‚  â”‚  - Memory target: 80%                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. **Monitoring Layer** (Ø·Ø¨Ù‚Ø© Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Prometheus                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Metrics Collection               â”‚  â”‚
â”‚  â”‚  - Application metrics            â”‚  â”‚
â”‚  â”‚  - System metrics                 â”‚  â”‚
â”‚  â”‚  - Custom metrics                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Grafana                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Visualization                    â”‚  â”‚
â”‚  â”‚  - Dashboards                     â”‚  â”‚
â”‚  â”‚  - Alerts                         â”‚  â”‚
â”‚  â”‚  - Reports                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”„ Data Flow (ØªØ¯ÙÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)

### Request Flow:
```
User Request
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Service   â”‚ (Load Balancer)
â”‚ hello-svc   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â–¼          â–¼          â–¼
   â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”
   â”‚Pod 1â”‚    â”‚Pod 2â”‚    â”‚Pod 3â”‚
   â””â”€â”€â”¬â”€â”€â”˜    â””â”€â”€â”¬â”€â”€â”˜    â””â”€â”€â”¬â”€â”€â”˜
      â”‚          â”‚          â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
         â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”
    â”‚Postgres â”‚     â”‚ Redis â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Monitoring Flow:
```
Application
    â”‚
    â”œâ”€ Logs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ stdout (JSON format)
    â”‚
    â””â”€ Metrics â”€â”€â”€â”€â”€â”€â”€â–¶ /metrics endpoint
                           â”‚
                           â–¼
                      Prometheus
                           â”‚
                           â–¼
                       Grafana
```

---

## ðŸ” Security Architecture

### Network Security:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         External Access                 â”‚
â”‚  (NodePort Services)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Kubernetes Network                 â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Public Services               â”‚    â”‚
â”‚  â”‚  - hello-service (30253)       â”‚    â”‚
â”‚  â”‚  - prometheus (30090)          â”‚    â”‚
â”‚  â”‚  - grafana (30030)             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Internal Services             â”‚    â”‚
â”‚  â”‚  - postgres (5432)             â”‚    â”‚
â”‚  â”‚  - redis (6379)                â”‚    â”‚
â”‚  â”‚  (ClusterIP - internal only)   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Container Security:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Container Security              â”‚
â”‚                                          â”‚
â”‚  âœ… Non-root user (UID 1000)            â”‚
â”‚  âœ… Read-only filesystem (where possible)â”‚
â”‚  âœ… Resource limits                      â”‚
â”‚  âœ… Security scanning (Trivy)            â”‚
â”‚  âœ… Minimal base image (alpine/slim)     â”‚
â”‚  âœ… No secrets in image                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Secrets Management:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Kubernetes Secrets                 â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  postgres-secret               â”‚    â”‚
â”‚  â”‚  - POSTGRES_USER               â”‚    â”‚
â”‚  â”‚  - POSTGRES_PASSWORD           â”‚    â”‚
â”‚  â”‚  - POSTGRES_DB                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  app-secret                    â”‚    â”‚
â”‚  â”‚  - DB_USER                     â”‚    â”‚
â”‚  â”‚  - DB_PASSWORD                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                          â”‚
â”‚  (Base64 encoded, mounted as env vars)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“¦ Storage Architecture

### Persistent Storage:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Persistent Volumes                  â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  postgres-pvc (1Gi)            â”‚    â”‚
â”‚  â”‚  - ReadWriteOnce               â”‚    â”‚
â”‚  â”‚  - Mounted: /var/lib/postgresqlâ”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Ephemeral Storage             â”‚    â”‚
â”‚  â”‚  - Redis (emptyDir)            â”‚    â”‚
â”‚  â”‚  - Grafana (emptyDir)          â”‚    â”‚
â”‚  â”‚  - Prometheus (emptyDir)       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”„ CI/CD Pipeline Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Developer                          â”‚
â”‚         (git push to main)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          GitHub Actions                         â”‚
â”‚                                                  â”‚
â”‚  Stage 1: Test                                  â”‚
â”‚  â”œâ”€ Unit tests (pytest)                         â”‚
â”‚  â”œâ”€ Code coverage                               â”‚
â”‚  â””â”€ Lint checks                                 â”‚
â”‚                                                  â”‚
â”‚  Stage 2: Security                              â”‚
â”‚  â”œâ”€ Trivy scan                                  â”‚
â”‚  â””â”€ Dependency check                            â”‚
â”‚                                                  â”‚
â”‚  Stage 3: Build                                 â”‚
â”‚  â”œâ”€ Docker build                                â”‚
â”‚  â””â”€ Tag image                                   â”‚
â”‚                                                  â”‚
â”‚  Stage 4: Push                                  â”‚
â”‚  â””â”€ Push to Docker Hub                          â”‚
â”‚                                                  â”‚
â”‚  Stage 5: Deploy                                â”‚
â”‚  â”œâ”€ Update K8s deployment                       â”‚
â”‚  â”œâ”€ Rolling update                              â”‚
â”‚  â””â”€ Health check                                â”‚
â”‚                                                  â”‚
â”‚  Stage 6: Verify                                â”‚
â”‚  â”œâ”€ Smoke tests                                 â”‚
â”‚  â””â”€ Rollback if failed                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸŽ¯ Resource Allocation

### Application Pods:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         hello-deployment                â”‚
â”‚                                          â”‚
â”‚  Resources per Pod:                     â”‚
â”‚  â”œâ”€ CPU Request: 100m                   â”‚
â”‚  â”œâ”€ CPU Limit: 500m                     â”‚
â”‚  â”œâ”€ Memory Request: 128Mi               â”‚
â”‚  â””â”€ Memory Limit: 256Mi                 â”‚
â”‚                                          â”‚
â”‚  Replicas: 2-10 (auto-scaled)           â”‚
â”‚  Total Resources (min):                 â”‚
â”‚  â”œâ”€ CPU: 200m                           â”‚
â”‚  â””â”€ Memory: 256Mi                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Database:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         PostgreSQL                      â”‚
â”‚                                          â”‚
â”‚  Resources:                             â”‚
â”‚  â”œâ”€ CPU Request: 250m                   â”‚
â”‚  â”œâ”€ CPU Limit: 500m                     â”‚
â”‚  â”œâ”€ Memory Request: 256Mi               â”‚
â”‚  â”œâ”€ Memory Limit: 512Mi                 â”‚
â”‚  â””â”€ Storage: 1Gi (PVC)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Cache:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Redis                           â”‚
â”‚                                          â”‚
â”‚  Resources:                             â”‚
â”‚  â”œâ”€ CPU Request: 100m                   â”‚
â”‚  â”œâ”€ CPU Limit: 200m                     â”‚
â”‚  â”œâ”€ Memory Request: 128Mi               â”‚
â”‚  â””â”€ Memory Limit: 256Mi                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Monitoring:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Prometheus + Grafana               â”‚
â”‚                                          â”‚
â”‚  Prometheus:                            â”‚
â”‚  â”œâ”€ CPU Request: 250m                   â”‚
â”‚  â”œâ”€ CPU Limit: 500m                     â”‚
â”‚  â”œâ”€ Memory Request: 256Mi               â”‚
â”‚  â””â”€ Memory Limit: 512Mi                 â”‚
â”‚                                          â”‚
â”‚  Grafana:                               â”‚
â”‚  â”œâ”€ CPU Request: 100m                   â”‚
â”‚  â”œâ”€ CPU Limit: 200m                     â”‚
â”‚  â”œâ”€ Memory Request: 128Mi               â”‚
â”‚  â””â”€ Memory Limit: 256Mi                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Total Cluster Requirements (Minimum):**
```
CPU:    ~1.5 cores
Memory: ~2.5 GB
Storage: ~2 GB
```

---

## ðŸ”§ Configuration Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ConfigMaps & Secrets               â”‚
â”‚                                          â”‚
â”‚  ConfigMaps:                            â”‚
â”‚  â”œâ”€ app-config                          â”‚
â”‚  â”‚  â”œâ”€ APP_VERSION                      â”‚
â”‚  â”‚  â”œâ”€ DB_HOST                          â”‚
â”‚  â”‚  â”œâ”€ DB_NAME                          â”‚
â”‚  â”‚  â”œâ”€ REDIS_HOST                       â”‚
â”‚  â”‚  â””â”€ REDIS_PORT                       â”‚
â”‚  â”‚                                       â”‚
â”‚  â”œâ”€ postgres-init                       â”‚
â”‚  â”‚  â””â”€ init.sql                         â”‚
â”‚  â”‚                                       â”‚
â”‚  â”œâ”€ redis-config                        â”‚
â”‚  â”‚  â””â”€ redis.conf                       â”‚
â”‚  â”‚                                       â”‚
â”‚  â””â”€ prometheus-config                   â”‚
â”‚     â””â”€ prometheus.yml                   â”‚
â”‚                                          â”‚
â”‚  Secrets:                               â”‚
â”‚  â”œâ”€ postgres-secret                     â”‚
â”‚  â”‚  â”œâ”€ POSTGRES_USER                    â”‚
â”‚  â”‚  â”œâ”€ POSTGRES_PASSWORD                â”‚
â”‚  â”‚  â””â”€ POSTGRES_DB                      â”‚
â”‚  â”‚                                       â”‚
â”‚  â””â”€ app-secret                          â”‚
â”‚     â”œâ”€ DB_USER                          â”‚
â”‚     â””â”€ DB_PASSWORD                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“ˆ Scaling Strategy

### Horizontal Pod Autoscaler (HPA):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Auto-scaling Rules              â”‚
â”‚                                          â”‚
â”‚  Metrics:                               â”‚
â”‚  â”œâ”€ CPU > 70% â†’ Scale Up                â”‚
â”‚  â”œâ”€ Memory > 80% â†’ Scale Up             â”‚
â”‚  â”œâ”€ CPU < 30% â†’ Scale Down              â”‚
â”‚  â””â”€ Memory < 40% â†’ Scale Down           â”‚
â”‚                                          â”‚
â”‚  Limits:                                â”‚
â”‚  â”œâ”€ Min Replicas: 2                     â”‚
â”‚  â”œâ”€ Max Replicas: 10                    â”‚
â”‚  â””â”€ Cooldown: 5 minutes                 â”‚
â”‚                                          â”‚
â”‚  Behavior:                              â”‚
â”‚  â”œâ”€ Scale Up: Fast (100% or +2 pods)    â”‚
â”‚  â””â”€ Scale Down: Slow (50% per 5min)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸŽ¯ High Availability

### Application:
- âœ… Multiple replicas (2-10)
- âœ… Rolling updates (zero downtime)
- âœ… Health checks (liveness, readiness)
- âœ… Auto-restart on failure
- âœ… Load balancing

### Database:
- âš ï¸  Single instance (for demo)
- ðŸ’¡ Production: Use StatefulSet + Replication
- ðŸ’¡ Production: Use managed DB (RDS, Cloud SQL)

### Cache:
- âš ï¸  Single instance (for demo)
- ðŸ’¡ Production: Use Redis Cluster
- ðŸ’¡ Production: Use managed Redis

---

## ðŸš€ Deployment Strategy

### Rolling Update:
```
Old Version (v1)          New Version (v2)
â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”
â”‚ v1 â”‚ â”‚ v1 â”‚ â”‚ v1 â”‚    Initial state
â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”
â”‚ v1 â”‚ â”‚ v1 â”‚ â”‚ v2 â”‚    Start update
â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”
â”‚ v1 â”‚ â”‚ v2 â”‚ â”‚ v2 â”‚    Continue
â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”
â”‚ v2 â”‚ â”‚ v2 â”‚ â”‚ v2 â”‚    Complete
â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜
```

**Parameters:**
- Max Surge: 1 (can have 4 pods during update)
- Max Unavailable: 1 (minimum 2 pods always running)

---

## ðŸ“Š Metrics & Observability

### Application Metrics:
```
/metrics endpoint provides:
â”œâ”€ app_requests_total
â”‚  â””â”€ Labels: method, endpoint, status
â”œâ”€ app_request_latency_seconds
â”‚  â””â”€ Histogram: buckets for latency
â”œâ”€ process_cpu_seconds_total
â”œâ”€ process_resident_memory_bytes
â””â”€ python_gc_* (garbage collection)
```

### Logs:
```
JSON structured logs:
{
  "method": "GET",
  "path": "/",
  "status": 200,
  "latency": 0.023,
  "ip": "10.244.0.1",
  "timestamp": "2025-11-03T12:00:00Z"
}
```

---

**ðŸŽ‰ Ù‡Ø°Ù‡ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ù„Ù…Ø´Ø±ÙˆØ¹ DevOps Ø§Ø­ØªØ±Ø§ÙÙŠ!**
